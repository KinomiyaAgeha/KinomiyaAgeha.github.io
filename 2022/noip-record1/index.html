<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>「NOIP Record」#1 贪心 | yozora0908's blog</title><meta name="author" content="yozora0908"><meta name="copyright" content="yozora0908"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="前言 NOIP 快要到了，进行一个习的复。 无意间发现自己连很多贪心题都不会做了，于是就有了这篇文章，完善一下贪心的思维方式。  一些问题 Buy Low Sell High  You can perfectly predict the price of a certain stock"><link rel="shortcut icon" href="/img/4.png"><link rel="canonical" href="https://yozora0908.github.io/2022/noip-record1/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><meta/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '「NOIP Record」#1 贪心',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-11-13 10:58:52'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/2.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">209</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">80</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">yozora0908's blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">「NOIP Record」#1 贪心</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2022-11-12T12:04:05.000Z" title="发表于 2022-11-12 20:04:05">2022-11-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">学习笔记</a></span></div><div class="meta-secondline"></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="前言">前言</h2>
<p>NOIP 快要到了，进行一个习的复。</p>
<p>无意间发现自己连很多贪心题都不会做了，于是就有了这篇文章，完善一下贪心的思维方式。</p>
<span id="more"></span>
<h2 id="一些问题">一些问题</h2>
<h3 id="buy-low-sell-high">Buy Low Sell High</h3>
<blockquote>
<p>You can perfectly predict the price of a certain stock for the next
<span class="math inline">\(N\)</span> days. You would like to profit on
this knowledge, but only want to transact one share of stock per day.
That is, each day you will either buy one share, sell one share, or do
nothing. Initially you own zero shares, and you cannot sell shares when
you don't own any. At the end of the <span
class="math inline">\(N\)</span> days you would like to again own zero
shares, but want to have as much money as possible.</p>
</blockquote>
<p>贪心的要领是仅考虑局部最优解。</p>
<p>对于第 <span class="math inline">\(i\)</span>
天，如果要卖出，那么一定满足这一天的售价 <span
class="math inline">\(p_i\)</span> 大于之前的某个 <span
class="math inline">\(p_j\)</span>，答案会贡献上 <span
class="math inline">\(p_i - p_j\)</span>。</p>
<p>用堆维护最小的 <span class="math inline">\(p_j\)</span> 即可。</p>
<h3 id="排队接水">排队接水</h3>
<blockquote>
<p><span class="math inline">\(n\)</span> 个人⼀起接水，第 <span
class="math inline">\(i\)</span> 个人需要 <span
class="math inline">\(b_i\)</span> 的时间来接水。</p>
<p>最小化所有人的等待时间之和。</p>
</blockquote>
<p>对于第 <span class="math inline">\(i\)</span>
个接水的人，会让总和增加 <span class="math inline">\((n-i) \cdot
b_i\)</span>。</p>
<p>显然，按照 <span class="math inline">\(b_i\)</span> 递增排序。</p>
<h3 id="排队接水2">排队接水2</h3>
<blockquote>
<p><span class="math inline">\(n\)</span> 个人⼀起接水，第 <span
class="math inline">\(i\)</span> 个人需要 <span
class="math inline">\(b_i\)</span> 的时间来接水，同时她有一个权值 <span
class="math inline">\(a_i\)</span>，会让正在等待的所有人产生 <span
class="math inline">\(a_i b_i\)</span> 点不高兴值。</p>
<p>最小化所有人的不高兴值之和。</p>
</blockquote>
<p>考虑邻项交换，假设 <span class="math inline">\(i\)</span> 先于 <span
class="math inline">\(j\)</span>。</p>
<p>那么贡献为 <span class="math inline">\(a_i b_i + a_j(b_i + b_j) =
a_ib_i + a_j b_j + a_jb_i\)</span>。</p>
<p>交换后 <span class="math inline">\(a_jb_j + a_i(b_i+b_j) = a_i b_i +
a_j b_j + a_i b_j\)</span>。</p>
<p>按照 <span class="math inline">\(a_i b_j\)</span> 排序即可。</p>
<h3 id="最高的奖励">最高的奖励</h3>
<blockquote>
<p><span class="math inline">\(n\)</span> 个任务，完成一个任务的花费是
<span class="math inline">\(1\)</span>，第 <span
class="math inline">\(i\)</span> 个任务如果在 <span
class="math inline">\(t_i\)</span> 之前完成，那么获得 <span
class="math inline">\(w_i\)</span> 的收益。</p>
<p>最大化总收益。</p>
</blockquote>
<p>将任务按照 <span class="math inline">\(t_i\)</span>
递增排序，对于一个 <span class="math inline">\(i\)</span>，此时最多完成
<span class="math inline">\(t_i\)</span> 个任务。</p>
<p>维护一个集合，将任务的价值依次加入集合，如果到第 <span
class="math inline">\(i\)</span> 个任务集合中的任务数量大于 <span
class="math inline">\(t_i\)</span>，那么如果把集合中价值最小的任务换成这个任务更优的话，就贪心交换。</p>
<p>否则直接过。</p>
<h2 id="另一些题">另一些题</h2>
<h3 id="luogu2107-小z的ak计划">luogu2107 小Z的AK计划</h3>
<p>通过邻项交换可以证明，开题顺序一定是按照 <span
class="math inline">\(x_i\)</span> 递增。</p>
<p>将想题和走路分开计算。</p>
<p>考虑对于一个 <span
class="math inline">\(x_i\)</span>，不管前面怎么选择，一定只剩下 <span
class="math inline">\(m-x_i\)</span> 的时间想题。</p>
<p>维护一个集合，表示每个能够完成的题目所用的时间。把 <span
class="math inline">\(t_i\)</span> 加入集合，如果此时所用的时间总和大于
<span
class="math inline">\(m-x_i\)</span>，那么就要放弃一些题目，贪心删掉用时最小的那些题目即可。</p>
<p>记录合法的集合的最大元素个数即可。</p>
<h3 id="luogu3045">luogu3045</h3>
<p>先按照优惠后的价格递增排序，优先选择前 <span
class="math inline">\(k\)</span> 个，这样一定是最优的。</p>
<p>证明：假设存在某一个降价后的价格 <span
class="math inline">\(c_i\)</span>，一个原价 <span
class="math inline">\(p_j\)</span>，满足 <span class="math inline">\(c_i
&gt; p_j\)</span>，那么一定有 <span class="math inline">\(c_j &lt;
p_j\)</span>，因此 <span class="math inline">\(c_j\)</span> 一定在 <span
class="math inline">\(c_i\)</span> 之前被选择。所以这样做是最优的。</p>
<p>如果这样做之后还剩下钱，那么将 <span
class="math inline">\([k+1,n]\)</span>
按照原价递增排序。同时用一个集合维护所有已经购买的奶牛的 <span
class="math inline">\(p_i-c_i\)</span>。</p>
<p>如果存在一个 <span class="math inline">\(i \in
[k+1,n]\)</span>，满足存在集合中的 <span
class="math inline">\(j\)</span>，使得 <span class="math inline">\(c_i +
p_j - c_j &lt; p_i\)</span>，那么就把 <span
class="math inline">\(j\)</span> 的优惠券换到 <span
class="math inline">\(i\)</span> 身上。</p>
<p>否则贪心加原价即可。</p>
<h3 id="bzoj3728-zarowki">BZOJ3728 Zarowki</h3>
<blockquote>
<p>有 <span class="math inline">\(n\)</span> 个房间和 <span
class="math inline">\(n\)</span>
盏灯，你需要在每个房间里放入一盏灯。每盏灯都有一定功率，每间房间都需要不少于一定功率的灯泡才可以完全照亮。
你可以去附近的商店换新灯泡，商店里所有正整数功率的灯泡都有售。但由于背包空间有限，你至多只能换
<span class="math inline">\(k\)</span> 个灯泡。
你需要找到一个合理的方案使得每个房间都被完全照亮，并在这个前提下使得总功率尽可能小。</p>
</blockquote>
<p>将每个房间要求的功率和灯泡功率递增排序，对于房间 <span
class="math inline">\(i\)</span>，维护所有能够满足条件的灯泡，贪心地选择最小的那一个。如果没有能选择的，那么就换一个等于它功率的灯泡。</p>
<p>如果做完这些之后还有换灯泡的机会，那么贪心地换掉最大的那几个差值就行了。</p>
<h3 id="bzoj1528-sam-toy-cars">BZOJ1528 sam-Toy Cars</h3>
<blockquote>
<p>Jasio 是一个三岁的小男孩，他最喜欢玩玩具了，他有 <span
class="math inline">\(n\)</span>
个不同的玩具，它们都被放在了很高的架子上所以 Jasio
拿不到它们。为了让他的房间有足够的空间，在任何时刻地板上都不会有超过
<span class="math inline">\(k\)</span> 个玩具。Jasio
在地板上玩玩具。Jasio 的妈妈则在房间里陪他的儿子。当 Jasio
想玩地板上的其他玩具时，他会自己去拿，如果他想玩的玩具在架子上，他的妈妈则会帮他去拿，当她拿玩具的时候，顺便也会将一个地板上的玩具放上架子使得地板上有足够的空间。他的妈妈很清楚自己的孩子所以他能够预料到
Jasio
想玩些什么玩具。所以她想尽量的使自己去架子上拿玩具的次数尽量的少，应该怎么安排放玩具的顺序呢？</p>
</blockquote>
<p>感觉题目叙述得不是很清楚。</p>
<p>对于前 <span class="math inline">\(k\)</span>
个要玩的玩具，那必然直接放到地板上。否则一定要带走一个玩具，优先选择下一次玩的时间最靠后的即可。</p>
<h3 id="luogu2949-work-scheduling">luogu2949 Work Scheduling</h3>
<blockquote>
<p>约翰有太多的工作要做。为了让农场高效运转，他必须靠他的工作赚钱，每项工作花
<span class="math inline">\(1\)</span> 个单位时间。 他的工作日从 <span
class="math inline">\(0\)</span> 时刻开始。在任一时刻，他都可以选择编号
<span class="math inline">\(1\)</span> 到 <span
class="math inline">\(n\)</span> 的 <span
class="math inline">\(n\)</span> 项工作中的任意一项工作来完成。
因为他在每个单位时间里只能做一个工作，而每项工作又有一个截止日期，所以他很难有时间完成所有N个工作，虽然还是有可能。对于第
<span class="math inline">\(i\)</span> 个工作，有一个截止时间 <span
class="math inline">\(d_i\)</span>，如果他可以完成这个工作，那么他可以获利
<span class="math inline">\(p_i\)</span>。
在给定的工作利润和截止时间下，约翰能够获得的利润最大为多少。</p>
</blockquote>
<p>按照 Dead Line 递增排序，维护当前时刻能够完成的任务集合。</p>
<p>如果任务 <span class="math inline">\(i\)</span> 的 DDL
大于集合元素个数，那么直接加入。</p>
<p>否则换出价值最小的即可。</p>
<h2 id="luogu4053-建筑抢修">luogu4053 建筑抢修</h2>
<blockquote>
<p>小刚在玩 JSOI
提供的一个称之为“建筑抢修”的电脑游戏：经过了一场激烈的战斗，T
部落消灭了所有 Z 部落的入侵者。但是 T 部落的基地里已经有 <span
class="math inline">\(N\)</span>
个建筑设施受到了严重的损伤，如果不尽快修复的话，这些建筑设施将会完全毁坏。现在的情况是：T
部落基地里只有一个修理工人，虽然他能瞬间到达任何一个建筑，但是修复每个建筑都需要一定的时间。同时，修理工人修理完一个建筑才能修理下一个建筑，不能同时修理多个建筑。如果某个建筑在一段时间之内没有完全修理完毕，这个建筑就报废了。你的任务是帮小刚合理的制订一个修理顺序，以抢修尽可能多的建筑。</p>
</blockquote>
<p>直观的想法是按照 Dead Line 递增排序，贪心修理。</p>
<p>但是很容易举出反例。</p>
<pre class="line-numbers language-markdown" data-language="markdown"><code class="language-markdown">5
10 10
10 10
2 21
2 21
2 21<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>考虑反悔贪心。</p>
<p>如果枚举到了一个建筑，但是此时它已经报废了，但是修理它的时间比之前某个建筑的用时要少，那么我们可以放弃修理那个建筑，反而修理这个建筑。虽然对答案没有贡献，但是能够争取更多的时间。</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token keyword">const</span> <span class="token keyword">int</span> N<span class="token operator">=</span><span class="token number">2e6</span><span class="token operator">+</span><span class="token number">6</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> i<span class="token punctuation">,</span> n<span class="token punctuation">,</span> k<span class="token punctuation">,</span> ans<span class="token punctuation">;</span>
priority_queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> q<span class="token punctuation">;</span>
<span class="token keyword">struct</span> <span class="token class-name">E</span> <span class="token punctuation">&#123;</span> <span class="token keyword">int</span> x<span class="token punctuation">,</span> y<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span> a<span class="token punctuation">[</span>N<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">bool</span> <span class="token keyword">operator</span><span class="token operator">&lt;</span><span class="token punctuation">(</span>E a<span class="token punctuation">,</span>E b<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token keyword">return</span> a<span class="token punctuation">.</span>y<span class="token operator">&lt;</span>b<span class="token punctuation">.</span>y<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span><span class="token operator">&amp;</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">sort</span><span class="token punctuation">(</span>a<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>a<span class="token operator">+</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span>n<span class="token punctuation">;</span><span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token keyword">if</span><span class="token punctuation">(</span>k<span class="token operator">+</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token operator">></span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token operator">&lt;</span>q<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            k<span class="token operator">-=</span>q<span class="token punctuation">.</span><span class="token function">top</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> k<span class="token operator">+=</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> 
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> k<span class="token operator">+=</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>x<span class="token punctuation">,</span> <span class="token operator">++</span>ans<span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"%d\n"</span><span class="token punctuation">,</span>ans<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>更经典的 <a
href="https://yozora0908.github.io/2022/lg3620-solution">luogu3620
数据备份</a>。</p>
<h2 id="博弈贪心">博弈贪心</h2>
<p>通常题面是一个伪博弈论的性质，但仔细观察就能发现，这类题目中，先后手的博弈目的以及最优策略是一致的。</p>
<p>很不好找这一类题目啊。</p>
<h3 id="luogu3507-the-minima-game">luogu3507 The Minima Game</h3>
<blockquote>
<p>给出 <span class="math inline">\(n\)</span> 个正整数，A 和 B
两个人轮流取数，A 先取。每次可以取任意多个数，直到 <span
class="math inline">\(n\)</span>
个数都被取走。每次获得的得分为取的数中的最小值，A 和 B
的策略都是尽可能使得自己的得分减去对手的得分更大。在这样的情况下，求最终
A 的得分减去 B 的得分为多少。</p>
</blockquote>
<p>考虑这样一个事实，二者的最优策略是可以互相转化的。</p>
<p>假如先手为了某个很大的数 <span
class="math inline">\(p\)</span>，不得不单独取它，那么后手就能够得到不存在
<span class="math inline">\(p\)</span> 时的最优局面。</p>
<p>由于可以任意取数，所以可以将它们递增排序。</p>
<p>设 <span class="math inline">\(f_i\)</span> 为两人取完前 <span
class="math inline">\(i\)</span> 个数的答案，有 <span
class="math inline">\(f_1 = a_1\)</span>。</p>
<p>从 <span class="math inline">\(i-1\)</span> 转移到 <span
class="math inline">\(i\)</span> 时，如果先手想要得到 <span
class="math inline">\(a_i\)</span>，那么后手一定能得到 <span
class="math inline">\(f_{i-1}\)</span>，如果先手放弃 <span
class="math inline">\(a_i\)</span>，那么为了不让后手得到，一定会将它和其他的数一起取走，而
<span class="math inline">\(a_i\)</span> 是 <span
class="math inline">\([1,i]\)</span> 中的最大值，因此此时答案还是 <span
class="math inline">\(f_{i-1}\)</span>。 <span class="math display">\[
f_i = \max {\{ f_{i-1},a_i - f_{i-1} \}}
\]</span></p>
<h3 id="luogu8818-策略游戏">luogu8818 策略游戏</h3>
<p><a href="https://yozora0908.github.io/2022/lg8818-solution">solution
link</a></p>
<p>不难得到，每一方的选择最多只有 4
种，分别是正负数各自的最大最小值。</p>
<h3 id="bzoj2563-阿狸和桃子的游戏">BZOJ2563 阿狸和桃子的游戏</h3>
<p>考虑操作对答案的贡献。</p>
<ul>
<li>选择点 <span class="math inline">\(x\)</span>， <span
class="math inline">\(w(x)\)</span></li>
<li>不选择点 <span class="math inline">\(x\)</span>，<span
class="math inline">\(-w(x)\)</span></li>
<li>选择边 <span class="math inline">\(e\)</span> 的两个端点，<span
class="math inline">\(c(e)\)</span></li>
<li>不选择 <span class="math inline">\(e\)</span> 的两个端点，<span
class="math inline">\(-c(e)\)</span></li>
<li>选择 <span class="math inline">\(e\)</span> 的一个端点，<span
class="math inline">\(0\)</span></li>
</ul>
<p>选择一个端点的情况不好统计，但是只要让结果为 <span
class="math inline">\(0\)</span> 就行了。</p>
<p>让 <span class="math inline">\(w(x) \times 2\)</span>，然后令 <span
class="math inline">\(c\big((x \rightarrow y)\big) \rightarrow
w(x)\)</span>。</p>
<p>将 <span class="math inline">\(w(x)\)</span>
递减排序，正负依次相加即可，双方会轮流取贡献最大的点。</p>
<h3 id="cf388c">CF388C</h3>
<p>这个就比较显然了，如果某一堆有偶数个，那么一定是二者轮流取，否则会剩下一张，贪心取大的即可。</p>
<h3 id="luogu2964-a-coin-game">luogu2964 A Coin Game</h3>
<p>这个就要用到博弈 DP 的套路。</p>
<p>从终态向初始状态开始计算。</p>
<p>设 <span class="math inline">\(f_{i,j}\)</span> 表示还剩下 <span
class="math inline">\(i\)</span> 个硬币，上一次取了 <span
class="math inline">\(j\)</span> 个的最大收益。</p>
<p>那么这一次的个数范围是 <span class="math inline">\([1,2j]\)</span>。
<span class="math display">\[
f_{i,j} = \max_{k \in [1,2j]} \{ f_{i-k,k} \}
\]</span> 发现 <span class="math inline">\(f_{i,j-1}\)</span> 就包括了
<span class="math inline">\([1,2j-2]\)</span> 的最优解。 <span
class="math display">\[
f_{i,j} = \max\{ f_{i-(2j-1),2j-1},f_{i-2j,2j} \}
\]</span></p>
<h2 id="字典序贪心">字典序贪心</h2>
<p>比较杂，但是牢记决定字典序的是更靠前的字符即可。</p>
<p>典型题目 <a
href="https://yozora0908.github.io/2022/lg7915-solution">CSP-S2021
回文</a></p>
<h2 id="按位贪心">按位贪心</h2>
<p>CF 上有的是……</p>
<p>在二进制中，高位的 <span class="math inline">\(1\)</span>
能够带来的增长，大于低位所有的 <span class="math inline">\(1\)</span>
的总和。</p>
<p>一切，都在二进制位上做文章。</p>
<p>没啥可说的，更重要的是一种思想。</p>
<h3 id="luogu6824-可乐">luogu6824 可乐</h3>
<blockquote>
<p>pigstd 现在有 <span class="math inline">\(n\)</span> 箱可乐，第 <span
class="math inline">\(i\)</span> 箱可乐上标着一个正整数 <span
class="math inline">\(a_i\)</span>。</p>
<p>若 pigstd 的聪明值为一个非负整数 <span
class="math inline">\(x\)</span>，对于第 <span
class="math inline">\(x\)</span> 箱可乐，如果 <span
class="math inline">\((a_i \oplus x) \le k\)</span>，那么 pigstd
就能喝到这箱可乐。</p>
<p>现在 pigstd 告诉了你 <span class="math inline">\(k\)</span> 与序列
<span class="math inline">\(a\)</span>，你可以决定 pigstd 的聪明值 <span
class="math inline">\(x\)</span>，使得他能喝到的可乐的箱数最大。求出这个最大值。</p>
</blockquote>
<p>按位贪心，字典树上 DP 即可。</p>
<h2 id="反悔贪心">反悔贪心</h2>
<p>不放题目了。</p>
<p>返回贪心的本质，是及时修正一个不完全正确的贪心。单纯贪心不能保证全局最优，但是可以通过修改一个决策维护全局最优。</p>
<p>放两张图，侵删。</p>
<p><img
src="https://img-blog.csdnimg.cn/img_convert/ace4a6db647f05c847a82c2cfc875e41.png" /></p>
<p><img
src="https://img-blog.csdnimg.cn/img_convert/acef3b12a0dc85f4eae4f5b185b7d20f.png" /></p>
<p>这两张图也说明了，反悔贪心的前提是贪心策略是部分正确的，而一次反悔只与有限个决策有关。</p>
<p>返回贪心分为反悔自动机和反悔堆。</p>
<ul>
<li><p><strong>反悔自动机：</strong></p>
<p>即设计一种反悔策略，使得<strong>随便</strong>一种贪心策略都可以得到正解。</p>
<p>基本的设计思路是：每次选择<strong>直观上最接近全局最优解</strong>的贪心策略，若发现最优解不对，就想办法<strong>自动</strong>支持反悔策略。（这就是自动机的意思）</p>
<p>具体题目具体分析。一般需要反悔自动机的题都是通过差值巧妙达到反悔的目的。</p></li>
<li><p><strong>反悔堆：</strong></p>
<p>即通过<strong>堆</strong>（大根堆、小根堆）来维护当前贪心策略的最优解，若发现最优解不对，就退回上一步，更新最优解。</p>
<p>由于堆的性质，使得堆的<strong>首数据</strong>一定是最优的，这就可以实现<strong>快速更新最优解</strong>。</p></li>
</ul>
<p>（看看就行了，没啥实际用处）。</p>
<p>反悔贪心确实经常维护差值。</p>
<p>前面应该也有反悔贪心的例题。</p>
<h2 id="終わり">終わり</h2>
<p>啊啊啊，贪心，就这样吧。</p>
<p>靠纯贪心题的概率为 <span class="math inline">\(0\)</span>。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://yozora0908.github.io">yozora0908</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://yozora0908.github.io/2022/noip-record1/">https://yozora0908.github.io/2022/noip-record1/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://yozora0908.github.io" target="_blank">yozora0908's blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%B4%AA%E5%BF%83/">贪心</a></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2022/lg8818-solution/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">luogu8818 策略游戏 题解</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/2.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">yozora0908</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">209</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">80</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E4%BA%9B%E9%97%AE%E9%A2%98"><span class="toc-number">2.</span> <span class="toc-text">一些问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#buy-low-sell-high"><span class="toc-number">2.1.</span> <span class="toc-text">Buy Low Sell High</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E9%98%9F%E6%8E%A5%E6%B0%B4"><span class="toc-number">2.2.</span> <span class="toc-text">排队接水</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E9%98%9F%E6%8E%A5%E6%B0%B42"><span class="toc-number">2.3.</span> <span class="toc-text">排队接水2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%80%E9%AB%98%E7%9A%84%E5%A5%96%E5%8A%B1"><span class="toc-number">2.4.</span> <span class="toc-text">最高的奖励</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%A6%E4%B8%80%E4%BA%9B%E9%A2%98"><span class="toc-number">3.</span> <span class="toc-text">另一些题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#luogu2107-%E5%B0%8Fz%E7%9A%84ak%E8%AE%A1%E5%88%92"><span class="toc-number">3.1.</span> <span class="toc-text">luogu2107 小Z的AK计划</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#luogu3045"><span class="toc-number">3.2.</span> <span class="toc-text">luogu3045</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bzoj3728-zarowki"><span class="toc-number">3.3.</span> <span class="toc-text">BZOJ3728 Zarowki</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bzoj1528-sam-toy-cars"><span class="toc-number">3.4.</span> <span class="toc-text">BZOJ1528 sam-Toy Cars</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#luogu2949-work-scheduling"><span class="toc-number">3.5.</span> <span class="toc-text">luogu2949 Work Scheduling</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#luogu4053-%E5%BB%BA%E7%AD%91%E6%8A%A2%E4%BF%AE"><span class="toc-number">4.</span> <span class="toc-text">luogu4053 建筑抢修</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%9A%E5%BC%88%E8%B4%AA%E5%BF%83"><span class="toc-number">5.</span> <span class="toc-text">博弈贪心</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#luogu3507-the-minima-game"><span class="toc-number">5.1.</span> <span class="toc-text">luogu3507 The Minima Game</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#luogu8818-%E7%AD%96%E7%95%A5%E6%B8%B8%E6%88%8F"><span class="toc-number">5.2.</span> <span class="toc-text">luogu8818 策略游戏</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bzoj2563-%E9%98%BF%E7%8B%B8%E5%92%8C%E6%A1%83%E5%AD%90%E7%9A%84%E6%B8%B8%E6%88%8F"><span class="toc-number">5.3.</span> <span class="toc-text">BZOJ2563 阿狸和桃子的游戏</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cf388c"><span class="toc-number">5.4.</span> <span class="toc-text">CF388C</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#luogu2964-a-coin-game"><span class="toc-number">5.5.</span> <span class="toc-text">luogu2964 A Coin Game</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E5%85%B8%E5%BA%8F%E8%B4%AA%E5%BF%83"><span class="toc-number">6.</span> <span class="toc-text">字典序贪心</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%89%E4%BD%8D%E8%B4%AA%E5%BF%83"><span class="toc-number">7.</span> <span class="toc-text">按位贪心</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#luogu6824-%E5%8F%AF%E4%B9%90"><span class="toc-number">7.1.</span> <span class="toc-text">luogu6824 可乐</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%8D%E6%82%94%E8%B4%AA%E5%BF%83"><span class="toc-number">8.</span> <span class="toc-text">反悔贪心</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B5%82%E3%82%8F%E3%82%8A"><span class="toc-number">9.</span> <span class="toc-text">終わり</span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2022 By yozora0908</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container').forEach(node => {
            if (node.hasAttribute('display')) {
              btf.wrap(node, 'div', { class: 'mathjax-overflow' })
            } else {
              btf.wrap(node, 'span', { class: 'mathjax-overflow' })
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>function loadGiscus () {
  let nowTheme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'light'

  const config = Object.assign({
    src: 'https://giscus.app/client.js',
    'data-repo': 'yozora0908/My_giscus',
    'data-repo-id': 'R_kgDOImcT6w',
    'data-category-id': 'DIC_kwDOImcT684CTB4r',
    'data-mapping': 'pathname',
    'data-theme': nowTheme,
    'data-reactions-enabled': '1',
    crossorigin: 'anonymous',
    async: true
  },null)

  let ele = document.createElement('script')
  for (let key in config) {
    ele.setAttribute(key, config[key])
  }
  document.getElementById('giscus-wrap').insertAdjacentElement('afterbegin',ele)
}

function changeGiscusTheme () {
  const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'light'

  function sendMessage(message) {
    const iframe = document.querySelector('iframe.giscus-frame');
    if (!iframe) return;
    iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
  }

  sendMessage({
    setConfig: {
      theme: theme
    }
  });
}

if ('Giscus' === 'Giscus' || !false) {
  if (false) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
  else loadGiscus()
} else {
  function loadOtherComment () {
    loadGiscus()
  }
}</script></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script></div></body></html>